# 타입스크립트 프로그래밍

## Ch 09 람다 라이브러리

### Ch 09-1 람다 라이브러리 소개

**ramda 패키지 특징**

- 타입스크립트 언어와 100% 호환
- compose와 pipe 함수 제공
- 자동 커리(auto curry) 기능 제공
- 포인트가 없는 고차 도움 함수 제공
- 조합 논리(combinatory logic) 함수 일부 제공
- 하스켈 렌즈(lens) 라이브러리 기능 일부 제공
- 자바스크립트 표준 모나드 규격(fantasyland-spec)과 호환

### Ch 09-2 람다 기본 사용법

```typescript
R.range(최솟값, 최댓값); // [최솟값, 최솟값 + 1, ..., 최댓값 - 1]
```

```typescript
// 디버깅용 함수
R.tap(콜백함수)(배열)
```

- 람다는 타입스크립트를 고려해 만든 라이브러리가 아니며, 일반 화살표 함수를 사용하면 오류가 발생한다.
  - 이 오류를 해결하려면 타입 단언을 사용한다.
- 람다 라이브러리 함수들은 매개변수가 두 개인 일반 함수처럼 사용할 수 있고, 2차 고차 함수로 사용할 수도 있다.
  - 이를 람다 라이브러리에서 자동 커리(auto curry)라고 한다.

```typescript
// N개의 매개변수를 가진 1차 함수를 N개의 커리 매개변수를 가지는 N차 고차 함수로 만듬
R.curryN(N, 함수)
```

- 람다 라이브러리는 순수 함수를 고려해 설계되었다.
  - 항상 입력 변수의 상태를 변화시키지 않고 새로운 값을 반환한다.

### Ch 09-3 배열에 담긴 수 다루기

- 보통 함수형 프로그래밍은 선언형 프로그래밍(declarative programming) 방식으로 코드를 작성한다.
- 선언형 프로그래밍에서 모든 입력 데이터는 단순 데이터보다 배열 형태를 주로 사용한다.
- R.filp은 R.subtract와 같은 2차 고차 함수의 매개변수 순서를 바꿔준다.

### Ch 09-4 서술자와 조건 연산

- 함수형 프로그래밍에서 boolean 타입 값을 반환해 어떤 조건을 만족하는 지를 판단하는 함수를 서술자(predicate)라고 한다.
- R.lt나 R.gt처럼 boolean 타입의 값을 반환하는 함수들을 R.allPass와 R.anyPass라는 로직 함수를 통해 결합될 수 있다.

```typescript
R.allPass(서술자 배열) // 배열의 조건을 모두 만족하면 true
R.anyPass(서술자 배열) // 배열의 조건을 하나라도 만족하면 true
```

- R.not은 입력값이 true이면 false를 반환하고, false이면 true를 반환한다.
- R.ifElse는 세 가지 매개변수를 포함하는데, 첫 번째는 true/false를 반환하는 서술자를, 두 번째는 선택자가 true를 반환할 때 실행할 함수를, 세 번째는 선택자가 false를 반환할 때 실행하는 함수다.

```typescript
R.ifElse(
  조건 서술자,
  true일 때 실행할 함수,
  false일 때 실행할 함수
)
```

### Ch 09-5 문자열 다루기

- R.trim은 문자열 앞뒤의 공백을 제거해 준다.
- R.toLower 함수는 문자열에서 대문자를 모두 소문자로 전환하며, R.toUpper는 문자열에서 소문자를 대문자로 전환한다.
- R.split 함수는 구분자(delimiter)를 사용해 문자열을 배열로 바꿔준다.
- 문자열 배열은 R.join을 사용해 문자열로 바꿔준다.

```typescript
문자열 배열 = R.split(구분자)(문자열)
문자열 = R.join(구분자)(문자열 배열)
```

- 타입스크립트에서 문자열은 readonly 형태로만 사용할 수 있다.
  - 따라서 문자열을 가공하려면 일단 문자열을 배열로 전환해야 한다.

### Ch 09-6 chance 패키지로 객체 만들기

- chance 패키지는 그럴듯한 가짜 데이터를 만들어주는 라이브러리이다.

### Ch 09-7 렌즈를 활용한 객체의 속성 다루기

- 렌즈는 하스켈 언어의 Control.Lens 라이브러리 내용 중 자바스크립트에서 동작할 수 있는 게터와 세터 기능만들 람다 함수로 구현한 것이다.
- 람다의 렌즈 기능을 활용하면 객체의 속성값을 얻거나 설정하는 등의 작업을 쉽게 할 수 있다.
- R.prop는 객체의 특정 속성값을 가져오는 함수로써 이런 동작을 하는 함수를 게터(getter)라고 한다.
- R.assoc는 객체의 특정 속성값을 변경하는 함수로써 이런 동작을 하는 함수를 세터(setter)라고 한다.
- 람다 라이브러리에서 객체의 중첩 속성(nested property)을 경로(path)라고 한다.
- 긴 경로의 속성을 렌즈로 만들려면 R.lensPath 함수를 사용한다.

### Ch 09-8 객체 다루기

- R.toPairs 함수는 객체의 속성들을 분해해 배열로 만들어 준다.
  - 이때 배열의 각 아이템은 [string, any] 타입의 튜플이다.
- R.fromPairs 함수는 [키:값] 형태의 아이템을 가진 배열을 다시 객체로 만들어준다.
- R.keys 함수는 객체의 속성 이름만 추려서 string[] 타입 배열로 반환한다.
- R.values 함수는 객체의 속성값만 추려서 any[] 타입 배열로 반환한다.
- R.zipObj 함수는 키 배열과 값 배열이라는 두 가지 매개변수를 결합해 객체로 만들어 준다.
- R.mergeLeft와 R.mergeRight 함수는 두 개의 객체를 입력받아 두 객체의 속성들을 결합해 새로운 객체를 생성한다.
  - left는 왼쪽, right는 오른쪽 객체의 우선순위가 높다.
  - 이 함수들은 객체의 속성에 담긴 객체를 바꾸지는 못한다.
- R.mergeDeepLeft와 R.mergeDeepRight는 경로의 속성값들도 바꿀 수 있다.

### Ch 09-9 배열 다루기

- R.prepend와 R.append는 기존 배열의 앞뒤에 새 아이템을 삽입한 새 배열을 만들어 준다.
- R.flatten 함수는 복잡한 배열을 1차원의 평평한 배열로 바꿔준다.
- R.unnest 함수는 R.flatten는 조금 정교하게 배열을 가공해준다.
- R.sort 함수는 첫 번째 매개변수에 콜백 함수를 입력받는 2차 고차 함수이다.
  - a - b는 오름차순, 0이나 a + b는 내림차순으로 정렬한다.
- R.sortBy 함수는 배열에 담긴 아이템이 객체일 때 사용한다.
  - 항상 오름차순으로 정렬한다.

```typescript
정렬된 배열 = R.sortBy(객체의 속성을 얻는 함수)(배열)
```

- R.sortWith 함수는 R.ascend, R.descend 함수와 함께 사용되어 오름차순, 내림차순으로 정렬할 수 있다.

### Ch 09-10 조합 논리 이해하기

- 조합 논리학은 조합자(combinator)라는 특별한 형태의 고차 함수들을 결합해 새로운 조합자를 만들어 내는 것이다.
- 람다 라이브러리도 몇 가지 유명한 조합자를 제공한다.
  - R.identity
  - R.always
  - R.applyTo
  - R.unnest
  - R.flip
  - R.ap
- R.chain 함수는 함수를 매개변수로 받아 동작하는 함수로서 한 개일 때와 두 개일 때의 동작이 조금 다르다.

```typescript
R.chain(콜백 함수1)
R.chain(콜백 함수1, 콜백 함수2)
```

- R.chain 함수는 매개변수가 하나일 때는 flatMap 함수처럼 동작한다.